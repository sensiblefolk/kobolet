<div class="m-content">
  <!--Begin::Main Portlet-->
  <div class="m-portlet m-portlet--full-height">
    <!--begin: Portlet Head-->
    <div class="m-portlet__head">
      <div class="m-portlet__head-caption">
        <div class="m-portlet__head-title">
          <h4 class="m-portlet__head-text m--padding-20">
            User Registration
          </h4>
        </div>
      </div>
    </div>
    <!--end: Portlet Head-->
    <!--begin: Form Wizard-->
    <div class="m-wizard m-wizard--2 m-wizard--success" id="m_wizard">
      <!--begin: Message container -->
      <div class="m-portlet__padding-x">
        <!-- Here you can put a message or alert -->
      </div>
      <!--end: Message container -->
      <!--begin: Form Wizard Head -->
      <div class="m-wizard__head m-portlet__padding-x">
        <!--begin: Form Wizard Progress -->
        <div class="m-wizard__progress">
          <div class="progress">
            <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">
            </div>
          </div>
        </div>
        <!--end: Form Wizard Progress -->
        <!--begin: Form Wizard Nav -->
        <div class="m-wizard__nav">
          <div class="m-wizard__steps">
            <div class="m-wizard__step m-wizard__step--current" data-wizard-target="#m_wizard_form_step_1">
              <a class="m-wizard__step-number">
                <span>
                  <i class="fa  flaticon-placeholder"></i>
                </span>
              </a>
              <div class="m-wizard__step-info">
                <div class="m-wizard__step-title">
                  1. User Information
                </div>
              </div>
            </div>
            <div class="m-wizard__step" data-wizard-target="#m_wizard_form_step_2">
              <a class="m-wizard__step-number">
                <span>
                  <i class="fa  flaticon-layers"></i>
                </span>
              </a>
              <div class="m-wizard__step-info">
                <div class="m-wizard__step-title">
                  2. Account Setup
                </div>
              </div>
            </div>
            <div class="m-wizard__step" data-wizard-target="#m_wizard_form_step_3">
              <a class="m-wizard__step-number">
                <span>
                  <i class="fa  flaticon-layers"></i>
                </span>
              </a>
              <div class="m-wizard__step-info">
                <div class="m-wizard__step-title">
                  3. Confirmation
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--end: Form Wizard Nav -->
      </div>
      <!--end: Form Wizard Head -->
      <!--begin: Form Wizard Form-->
      <div class="m-wizard__form">
        <!--                 1) Use m-form--label-align-left class to alight the form input lables to the right                 2) Use m-form--state class to highlight input control borders on form validation                 -->
        <form (ngSubmit)="onSubmit(kobolet)" class="m-form m-form--label-align-left- m-form--state-" id="m_form"
          #kobolet="ngForm">
          <!--begin: Form Body -->
          <div class="m-portlet__body">
            <!--begin: Form Wizard Step 1-->
            <div class="m-wizard__form-step m-wizard__form-step--current" id="m_wizard_form_step_1">
              <div class="row">
                <div class="col-xl-8 offset-xl-2">
                  <div class="m-form__section m-form__section--first">
                    <div class="m-form__heading">
                      <h3 class="m-form__heading-title">
                        User Details
                      </h3>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * Name:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <input type="text" [(ngModel)]="userName" #name="ngModel" name="name"
                          class="form-control m-input" required [disabled]="bvnVerified">
                        <span class="m-form__help">
                          Please enter your first and last names
                        </span>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * Occupation:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <input type="text" [(ngModel)]="userOccupation" #occupation="ngModel" name="occupation"
                          class="form-control m-input" required>
                        <span class="m-form__help">
                          Please enter your occupation
                        </span>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * Phone
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text">
                              {{countryCode}}
                            </span>
                          </div>
                          <input type="number" [(ngModel)]="userPhone" #phone="ngModel" name="phone"
                            class="form-control m-input" required>
                        </div>
                        <span class="m-form__help">
                          Enter a valid phone number
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="m-separator m-separator--dashed m-separator--lg"></div>
                  <div class="m-form__section">
                    <div class="m-form__heading">
                      <h3 class="m-form__heading-title">
                        Mailing Address
                        <i data-toggle="m-tooltip" data-width="auto" class="m-form__heading-help-icon flaticon-info"
                          title="Please fill in your contact details"></i>
                      </h3>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * Address:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <input type="text" [(ngModel)]="userAddress" #address1="ngModel" name="address"
                          class="form-control m-input" required>
                        <span class="m-form__help">
                          Street address, P.O. box, company name, c/o
                        </span>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * City:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <input type="text" [(ngModel)]="userCity" #city="ngModel" name="city"
                          class="form-control m-input" required>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * State:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <input type="text" [(ngModel)]="userState" #state="ngModel" name="state"
                          class="form-control m-input" required>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <label class="col-xl-3 col-lg-3 col-form-label">
                        * Country:
                      </label>
                      <div class="col-xl-9 col-lg-9">
                        <select [(ngModel)]="userCountry" name="country" #country="ngModel" class="form-control m-input"
                          (click)="getCountryCode(userCountry)" (click)="getCurrency(userCountry)">

                          <option *ngFor="let location of countryLocation" [value]="location.name">
                            {{location.name}}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--end: Form Wizard Step 1-->
            <!--begin: Form Wizard Step 2-->
            <div class="m-wizard__form-step" id="m_wizard_form_step_2">
              <div class="row">
                <div class="col-xl-8 offset-xl-2">
                  <!--begin: Bank details for Nigeria-->
                  <div class="m-form__section m-form__section--first" *ngIf="supportedCountry; else notSupported">
                    <div class="m-form__heading">
                      <h3 class="m-form__heading-title">
                        Bank Account Details
                      </h3>
                    </div>
                    <div class="form-group m-form__group row">
                      <div class="col-lg-12">
                        <label class="form-control-label">
                          * Bank Name:
                        </label>
                        <select [(ngModel)]="selectedBank" name="bankName" #bankName="ngModel"
                          class="form-control m-input" required>
                          <option [value]="bankName.value" selected>{{bankName.value}}
                          </option>
                          <option *ngFor="let bank of banksArray" [value]="bank.name">
                            {{bank.name}}
                          </option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group m-form__group row">
                      <div class="col-lg-6 m-form__group-sub">
                        <label class="form-control-label">
                          * Account Number:
                        </label>
                        <div class="m-input-icon m-input-icon--right">
                          <input type="text" [(ngModel)]="userBankAccountNumber" #accountNumber="ngModel"
                            name="accountNumber" class="form-control m-input"
                            (input)='verifyAccountNumber(accountNumber.value)' [disabled]='acctNumbVerified' required>
                          <span class="m-input-icon__icon m-input-icon__icon--right">
                            <span>
                              <div class="m-loader m-loader--info" style="width: 30px; display: inline-block;"
                                *ngIf="acctNumbSpinner"></div>
                            </span>
                          </span>
                        </div>
                        <span class="m-form__help">
                          Please enter your 10 digit account number. e.g. 1012345321
                        </span>
                        <span [hidden]="!acctNumbError" class="m-form__help m--font-danger">
                          Invalid Account number
                        </span>
                      </div>
                      <div class="col-lg-6 m-form__group-sub">
                        <label class="form-control-label">
                          * Account Name:
                        </label>
                        <input type="text" [(ngModel)]="userBankAccountName" #accountName="ngModel" name="accountName"
                          class="form-control m-input" required [disabled]="bvnVerified">
                        <span class="m-form__help">
                          Please enter your account name. e.g. John Adewale
                        </span>
                      </div>
                      <div class="col-lg-6 m-form__group-sub" *ngIf="userCountry === 'Nigeria'">
                        <label class="form-control-label">
                          * BVN:
                        </label>
                        <div class="m-input-icon m-input-icon--right">
                          <input type="number" [(ngModel)]="bankBvn" #bvn="ngModel" name="bvn"
                            class="form-control m-input" minlength="11" required (input)="bvnCheck(bvn.value)"
                            [disabled]="bvnVerified || bvnSpinner">
                          <span class="m-input-icon__icon m-input-icon__icon--right">
                            <span>
                              <div class="m-loader m-loader--info" style="width: 30px; display: inline-block;"
                                *ngIf="bvnSpinner"></div>
                            </span>
                          </span>
                        </div>
                        <span class="m-form__help" [hidden]="bvnVerified">
                          Please enter your 11 digit BVN number
                        </span>
                        <span class="m-form__help m--font-success" *ngIf='bvnVerified'>
                          BVN verified successfully
                        </span>
                        <span class="m-form__help m--font-danger" *ngIf='bvnUnverified'>
                          BVN verification failed, please try again
                        </span>
                        <span class="m-form__help m--font-danger" *ngIf='isMatchError'>
                          Please enter the same BVN linked to the account number above
                        </span>
                      </div>
                    </div>
                  </div>
                  <!--end: Bank details for Nigeria-->
                  <!--begin: Bank details for other countries-->
                  <ng-template #notSupported>
                    <div class="m-form__section m-form__section--first">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Bank Account Details
                        </h3>
                      </div>
                      <div class="form-group m-form__group row">
                        <div class="col-lg-12">
                          <label class="form-control-label">
                            * Bank Name:
                          </label>
                          <input type="text" [(ngModel)]="userBankName" #bankName="ngModel" name="bankName"
                            class="form-control m-input" required>
                          <span class="m-form__help">
                            Please enter your bank name. e.g. HSBC
                          </span>
                        </div>
                      </div>
                      <div class="form-group m-form__group row">
                        <div class="col-lg-6 m-form__group-sub">
                          <label class="form-control-label">
                            * Account Name:
                          </label>
                          <input type="text" [(ngModel)]="userBankAccountName" #accountName="ngModel" name="accountName"
                            class="form-control m-input" required>
                          <span class="m-form__help">
                            Please enter your account name. e.g. John Doe
                          </span>
                        </div>
                        <div class="col-lg-6 m-form__group-sub">
                          <label class="form-control-label">
                            * Account Number:
                          </label>
                          <input type="string" [(ngModel)]="userBankAccountNumber" #accountNumber="ngModel"
                            name="accountNumber" class="form-control m-input" required>
                          <span class="m-form__help">
                            Please enter your account number. e.g. 10123456
                          </span>
                        </div>
                        <div class="col-lg-6 m-form__group-sub">
                          <label class="form-control-label">
                            Swift Code:
                          </label>
                          <input type="number" [(ngModel)]="userBankSwiftCode" #swift="ngModel" name="swift"
                            class="form-control m-input">
                        </div>
                      </div>
                    </div>
                  </ng-template>
                  <!--end: Bank details for other countries-->
                  <div class="m-separator m-separator--dashed m-separator--lg"></div>
                  <div class="m-form__section">
                    <div class="m-form__heading">
                      <h3 class="m-form__heading-title">
                        Verification
                      </h3>
                    </div>
                    <div class="form-group m-form__group">
                      <div class="row">
                        <div class="col-lg-12">
                          <!--begin::Portlet-->
                          <div
                            class="m-portlet m-portlet--accent m-portlet--head-solid-bg m-portlet--head-sm m--font-normal"
                            data-portlet="true" id="m_portlet_tools_1">
                            <div class="m-portlet__head">
                              <div class="m-portlet__head-caption">
                                <div class="m-portlet__head-title">
                                  <span class="m-portlet__head-icon">
                                    <i class="flaticon-user-ok"></i>
                                  </span>
                                  <h3 class="m-portlet__head-text">
                                    User Identity
                                  </h3>
                                </div>
                              </div>
                              <div class="m-portlet__head-tools">
                                <ul class="m-portlet__nav">
                                  <li class="m-portlet__nav-item">
                                    <a href="" data-portlet-tool="toggle"
                                      class="m-portlet__nav-link m-portlet__nav-link--icon">
                                      <i class="la la-angle-down"></i>
                                    </a>
                                  </li>
                                  <li class="m-portlet__nav-item">
                                    <a data-portlet-tool="fullscreen"
                                      class="m-portlet__nav-link m-portlet__nav-link--icon">
                                      <i class="la la-expand"></i>
                                    </a>
                                  </li>
                                </ul>
                              </div>
                            </div>
                            <div class="m-portlet__body">
                              <div class="m-scrollable" data-scrollbar-shown="true" data-scrollable="true"
                                data-max-height="300" style="overflow:hidden; height: 300px">
                                One form of identification with photo is required (passport preferred).

                                Identity Cards must have photo with both sides copied. Please provide official English
                                translation for Non-Roman Letters.
                                <div class="m-separator m-separator--space m-separator--dashed"></div>
                                <strong>REQUIRED</strong>
                                <span class="m--font-success">
                                  <ul>
                                    <li>The document must be valid: please double check expiration date</li>
                                    <li>The document must be issued from a government</li>
                                    <li>The document must show a photo of your face
                                    </li>
                                    <li>The document must have a high resolution</li>
                                    <li>You need to upload both sides (front and back) for ID cards.</li>
                                  </ul>
                                </span>
                                <div class="m-separator m-separator--space m-separator--dashed"></div>
                                <div class="m-form__group form-group">
                                  <label>
                                    Choose one section to complete
                                  </label>
                                  <div class="m-checkbox-list">
                                    <label class="m-checkbox m-checkbox--state-accent">
                                      <input type="checkbox" [(ngModel)]="passport" #passportId="ngModel"
                                        name="passportId" required={{kycSelectState}}>
                                      Passport
                                      <span></span>
                                    </label>
                                    <label class="m-checkbox m-checkbox--state-accent">
                                      <input type="checkbox" [(ngModel)]="national" #nationalId="ngModel"
                                        name="nationalId" required={{kycSelectState}}>
                                      National ID Card
                                      <span></span>
                                    </label>
                                    <label class="m-checkbox m-checkbox--state-accent">
                                      <input type="checkbox" [(ngModel)]="license" #licenseId="ngModel" name="licenseId"
                                        required={{kycSelectState}}>
                                      Driver License
                                      <span></span>
                                    </label>
                                  </div>
                                  <div class="m--space-20 m--padding-20">
                                    <ng-picker-overlay [pickerOptions]="options"
                                      (uploadSuccess)="onUploadSuccess($event)" (uploadError)="onUploadError($event)">
                                      <button type="button" [disabled]="inputStatus()" class="btn btn-accent">
                                        choose file
                                      </button>
                                    </ng-picker-overlay>
                                    <span class="m--font-danger m--font-normal m--pull-right m--align-right"
                                      [hidden]='!pending'>
                                      KYC verification pending
                                    </span>
                                  </div>
                                </div>

                              </div>
                            </div>
                          </div>
                          <!--end::Portlet-->
                        </div>
                        <div class="col-lg-12">

                        </div>
                      </div>
                      <div class="m-form__help">
                        <!--must use this helper element to display error message for the options-->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--end: Form Wizard Step 2-->
            <!--begin: Form Wizard Step 3-->
            <div class="m-wizard__form-step" id="m_wizard_form_step_3">
              <div class="row">
                <div class="col-xl-8 offset-xl-2">
                  <!--begin::Section-->
                  <ul class="nav nav-tabs m-tabs-line--2x m-tabs-line m-tabs-line--danger" role="tablist">
                    <li class="nav-item m-tabs__item">
                      <a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_form_confirm_1" role="tab">
                        1. User Information
                      </a>
                    </li>
                    <li class="nav-item m-tabs__item">
                      <a class="nav-link m-tabs__link" data-toggle="tab" href="#m_form_confirm_2" role="tab">
                        2. Account Setup
                      </a>
                    </li>
                  </ul>
                  <div class="tab-content m--margin-top-40">
                    <div class="tab-pane active" id="m_form_confirm_1" role="tabpanel">
                      <div class="m-form__section m-form__section--first">
                        <div class="m-form__heading">
                          <h4 class="m-form__heading-title">
                            User Details
                          </h4>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Name:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userName}}
                            </span>
                          </div>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Occupation:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userOccupation}}
                            </span>
                          </div>
                        </div>

                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Phone
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{countryCode}}-{{userPhone}}
                            </span>
                          </div>
                        </div>
                      </div>
                      <div class="m-separator m-separator--dashed m-separator--lg"></div>
                      <div class="m-form__section">
                        <div class="m-form__heading">
                          <h4 class="m-form__heading-title">
                            Mailing Address
                            <i data-toggle="m-tooltip" data-width="auto" class="m-form__heading-help-icon flaticon-info"
                              title="Some help text goes here"></i>
                          </h4>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Address:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userAddress}}
                            </span>
                          </div>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            City:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userCity}}
                            </span>
                          </div>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            State:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userState}}
                            </span>
                          </div>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Country:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userCountry}}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="tab-pane" id="m_form_confirm_2" role="tabpanel">
                      <div class="m-form__section m-form__section--first">
                        <div class="m-form__heading">
                          <h4 class="m-form__heading-title">
                            Account Details
                          </h4>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Bank Name:
                          </label>
                          <div class="col-xl-9 col-lg-9" *ngIf="userCountry ==='Nigeria'; else otherCountry">
                            <span class="m-form__control-static">
                              {{selectedBank}}
                            </span>
                          </div>
                          <ng-template #otherCountry>
                            <div class="col-xl-9 col-lg-9">
                              <span class="m-form__control-static">
                                {{userBankName}}
                              </span>
                            </div>
                          </ng-template>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Bank Account Name:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userBankAccountName}}
                            </span>
                          </div>
                        </div>
                        <div class="form-group m-form__group m-form__group--sm row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            Bank Account Number:
                          </label>
                          <div class="col-xl-9 col-lg-9">
                            <span class="m-form__control-static">
                              {{userBankAccountNumber}}
                            </span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--end::Section-->
                  <!--end::Section-->
                  <div class="m-separator m-separator--dashed m-separator--lg"></div>
                  <div class="form-group m-form__group m-form__group--sm row">
                    <div class="col-xl-12">
                      <div class="m-checkbox-inline">
                        <label class="m-checkbox m-checkbox--solid m-checkbox--brand">
                          <input type="checkbox" [(ngModel)]="termsCond" #accept="ngModel" name="accept" required>
                          Click here to indicate that you have read and agree to the terms presented in the Terms and
                          Conditions agreement
                          <span></span>
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--end: Form Wizard Step 3-->
          </div>
          <!--end: Form Body -->
          <!--begin: Form Actions -->
          <div class="m-portlet__foot m-portlet__foot--fit m--margin-top-40">
            <div class="m-form__actions">
              <div class="row">
                <div class="col-lg-2"></div>
                <div class="col-lg-4 m--align-left">
                  <a class="btn btn-secondary m-btn m-btn--custom m-btn--icon" data-wizard-action="prev">
                    <span>
                      <i class="la la-arrow-left"></i>
                      &nbsp;&nbsp;
                      <span>
                        Back
                      </span>
                    </span>
                  </a>
                </div>
                <div class="col-lg-4 m--align-right">
                  <div *ngIf="userCountry === 'Nigeria'; else skip">
                    <button type="submit" class="btn btn-accent m-btn m-btn--custom m-btn--icon"
                      data-wizard-action="submit" [disabled]="!kobolet.form.valid || submitStatus">
                      <span>
                        <i class="la la-check"></i>
                        &nbsp;&nbsp;
                        <span>
                          Submit
                        </span>
                      </span>
                    </button>
                  </div>
                  <ng-template #skip>
                    <button type="submit" class="btn btn-primary m-btn m-btn--custom m-btn--icon"
                      data-wizard-action="submit" [disabled]="!kobolet.form.valid || submitStatus">
                      <span>
                        <i class="la la-check"></i>
                        &nbsp;&nbsp;
                        <span>
                          Submit
                        </span>
                      </span>
                    </button>
                  </ng-template>
                  <a class="btn btn-accent m-btn m-btn--custom m-btn--icon" data-wizard-action="next">
                    <span>
                      <span>
                        Continue
                      </span>
                      &nbsp;&nbsp;
                      <i class="la la-arrow-right"></i>
                    </span>
                  </a>
                </div>
                <div class="col-lg-2"></div>
              </div>
            </div>
          </div>
          <!--end: Form Actions -->
        </form>
      </div>
      <!--end: Form Wizard Form-->
    </div>
    <!--end: Form Wizard-->
  </div>
  <!--End::Main Portlet-->
</div>
